@import "tailwindcss";
@plugin "@tailwindcss/typography";
@plugin "daisyui";

/*
-------------------------------------------------------------------------------
MERMAID DIAGRAMS
-------------------------------------------------------------------------------
*/
.mermaid-diagram {
    @apply flex justify-center my-4;
}

.mermaid-diagram svg {
    @apply max-w-full h-auto;
}

/*
-------------------------------------------------------------------------------
HIGHLIGHT JS
-------------------------------------------------------------------------------
*/
@import "highlight.js/styles/base16/dracula.css";
.hljs {
    /*Make the highlightjs background transparent*/
    background: transparent;
}
.prose {
    /*Set the prose background to Dracula*/
    --tw-prose-pre-bg: #282936;
}

/*
-------------------------------------------------------------------------------
Markdown Callouts (Marked.JS plugin)
-------------------------------------------------------------------------------
*/
/* Admonition styles for marked-alert */
.markdown-alert {
    @apply border-l-4 rounded-md p-4 mb-4;
}

.markdown-alert .markdown-alert-title {
    @apply flex items-center font-semibold mb-2 text-sm;
}

.markdown-alert .markdown-alert-title svg {
    @apply w-4 h-4 mr-2 flex-shrink-0;
}

/* Note variant */
.markdown-alert.markdown-alert-note {
    @apply border-l-blue-500 bg-blue-500/10;
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
    @apply text-blue-700 dark:text-blue-300;
}

/* Tip variant */
.markdown-alert.markdown-alert-tip {
    @apply border-l-green-500 bg-green-500/10;
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
    @apply text-green-700 dark:text-green-300;
}

/* Important variant */
.markdown-alert.markdown-alert-important {
    @apply border-l-purple-500 bg-purple-500/10;
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
    @apply text-purple-700 dark:text-purple-300;
}

/* Warning variant */
.markdown-alert.markdown-alert-warning {
    @apply border-l-yellow-500 bg-yellow-500/10;
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
    @apply text-yellow-700 dark:text-yellow-300;
}

/* Caution variant */
.markdown-alert.markdown-alert-caution {
    @apply border-l-red-500 bg-red-500/10;
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
    @apply text-red-700 dark:text-red-300;
}

/*
-------------------------------------------------------------------------------
Markdown Helper Classes
-------------------------------------------------------------------------------
*/

/* Carousel -----------------------------------------------------------------*/

.markdown-carousel {
    @apply carousel carousel-center bg-neutral rounded-box max-w-md space-x-4 p-4;
}

.markdown-carousel-item {
    @apply carousel-item;
}

/* Thumbnail Base Styles ---------------------------------------------------*/

[class*="markdown-thumb"] {
    @apply mb-4 max-w-xs bg-base-200 border border-base-300 rounded-lg overflow-hidden shadow-sm;
}

[class*="markdown-thumb"] img {
    @apply w-full h-auto block;
}

[class*="markdown-thumb"] .thumb-caption {
    @apply p-3 text-sm text-base-content/80 leading-relaxed;
}

[class*="markdown-thumb"] .thumb-caption p {
    @apply m-0;
}

/* Thumbnail Position Variants ---------------------------------------------*/

.markdown-thumb-right {
    @apply float-right clear-right ml-4;
}

.markdown-thumb-left {
    @apply float-left clear-left mr-4;
}

.markdown-thumb-center {
    @apply mx-auto;
}

/*
Example:

<div class="markdown-thumb-right">
  <img src="example-image.jpg" alt="Example thumbnail">
  <div class="thumb-caption">
    <p>This is an example of a right-floating thumbnail with a caption that provides additional context for the image.</p>
  </div>
</div>
*/

/*
-------------------------------------------------------------------------------
Code Block Titles and Paths
-------------------------------------------------------------------------------
*/

/* Code block with title/path header */
.code-block-with-header {
    @apply mb-4 rounded-lg overflow-hidden border border-base-300 shadow-sm;
}

/* Header containing title or file path */
.code-block-header {
    @apply bg-base-200 border-b border-base-300 px-4 py-2 text-sm font-mono text-base-content/70 flex items-center justify-between;
}

/* Language indicator */
.code-block-language {
    @apply text-xs px-2 py-1 bg-base-300 text-base-content/60 rounded font-medium uppercase tracking-wide;
}

/* Title variant - for descriptive titles */
.code-block-header.title {
    @apply text-base-content font-medium;
}

/* Path variant - for file paths */
.code-block-header.path {
    @apply text-base-content/60;
}

/* Path with line numbers */
.code-block-header.path-lines {
    @apply text-base-content/60;
}

/* The actual code container */
.code-block-with-header pre {
    @apply m-0 rounded-none border-none;
}

/* Copy button positioning for headers */
.code-block-with-header .copy-button {
    @apply opacity-40 hover:opacity-80;
}

/* Output section */
.code-block-output {
    @apply bg-base-100 border-t border-base-300 p-4 text-sm font-mono;
}

.code-block-output-header {
    @apply text-xs font-medium text-base-content/60 uppercase tracking-wide mb-2 flex items-center;
}

.code-block-output-header::before {
    @apply content-['▶'] mr-2 text-success;
}

/* Output content styling */
.code-block-output pre {
    @apply bg-transparent border-none p-0 m-0 text-base-content/80 whitespace-pre-wrap;
}

/*
Examples:

<!-- With descriptive title and language -->
<div class="code-block-with-header">
  <div class="code-block-header title">
    <span>HTML Thumbnail Component</span>
    <span class="code-block-language">html</span>
  </div>
  <pre style="position: relative; cursor: copy;" title="Double-click to copy">
    <code class="hljs language-html">...</code>
    <button class="copy-button btn btn-ghost btn-xs absolute top-2 right-2">Copy</button>
  </pre>
</div>

<!-- With file path and language -->
<div class="code-block-with-header">
  <div class="code-block-header path">
    <span>src/components/Thumbnail.tsx</span>
    <span class="code-block-language">tsx</span>
  </div>
  <pre style="position: relative; cursor: copy;" title="Double-click to copy">
    <code class="hljs language-typescript">...</code>
    <button class="copy-button btn btn-ghost btn-xs absolute top-2 right-2">Copy</button>
  </pre>
</div>

<!-- With file path, line numbers, and language -->
<div class="code-block-with-header">
  <div class="code-block-header path-lines">
    <span>src/components/Thumbnail.tsx#L12-24</span>
    <span class="code-block-language">tsx</span>
  </div>
  <pre style="position: relative; cursor: copy;" title="Double-click to copy">
    <code class="hljs language-typescript">...</code>
    <button class="copy-button btn btn-ghost btn-xs absolute top-2 right-2">Copy</button>
  </pre>
</div>

<!-- With output section -->
<div class="code-block-with-header">
  <div class="code-block-header title">
    <span>API Request Example</span>
    <span class="code-block-language">js</span>
  </div>
  <pre style="position: relative; cursor: copy;" title="Double-click to copy">
    <code class="hljs language-javascript">fetch('/api/users').then(r => r.json())</code>
    <button class="copy-button btn btn-ghost btn-xs absolute top-2 right-2">Copy</button>
  </pre>
  <div class="code-block-output">
    <div class="code-block-output-header">Output</div>
    <pre>{"users": [{"id": 1, "name": "John Doe"}]}</pre>
  </div>
</div>

<!-- As markdown -->

<div class="code-block-with-header">
<div class="code-block-header path">
~/.local/bin/dump_dynamo_db.fish
<span class="code-block-language">Fish</span>
</div>

```sh
fish
set n 30
for i in (seq 0 30)
    echo $i" / "$n
    aws dynamodb scan --table-name GforceTasks-notow4pikzczbpjg42gytvbuci-production \
        --total-segments $n \
        --segment $i > data/raw/tasks_$i.raw.json
end
```

<div class="code-block-output">
<div class="code-block-output-header">Console Output</div>

<pre>
✓ Build completed successfully
✓ 42 files processed
✓ Ready for deployment
</pre>

</div>
</div>

*/

/*
-------------------------------------------------------------------------------
Tiptap Editor
-------------------------------------------------------------------------------
*/

/* Placeholder */
.tiptap p.is-editor-empty:first-child::before {
    @apply text-base-content/30 float-left h-0 pointer-events-none;
    content: attr(data-placeholder);
}

/* Task list checkboxes */
.tiptap ul[data-type="taskList"] {
    @apply list-none p-0;
}

.tiptap ul[data-type="taskList"] li {
    @apply flex items-start gap-2;
}

.tiptap ul[data-type="taskList"] li > label {
    @apply flex-shrink-0 mt-0.5;
}

.tiptap ul[data-type="taskList"] li > label input[type="checkbox"] {
    @apply checkbox checkbox-sm checkbox-primary;
}

.tiptap ul[data-type="taskList"] li > div {
    @apply flex-1;
}

/* Focus ring */
.tiptap:focus-visible {
    @apply outline-none;
}

/* Link styling in editor */
.tiptap a {
    @apply text-primary underline decoration-primary/40 hover:decoration-primary cursor-pointer;
}

/* Code block styling */
.tiptap pre {
    @apply bg-base-300 rounded-lg p-4 font-mono text-sm;
}

.tiptap pre code {
    @apply bg-transparent p-0;
}

/* Highlight */
.tiptap mark {
    @apply bg-yellow-200 dark:bg-yellow-500/30 rounded px-0.5;
}

/* Horizontal rule */
.tiptap hr {
    @apply border-base-300 my-4;
}

/* Image */
.tiptap img {
    @apply max-w-full h-auto rounded-lg;
}

/* Safe area for mobile bottom toolbar */
.safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
}

